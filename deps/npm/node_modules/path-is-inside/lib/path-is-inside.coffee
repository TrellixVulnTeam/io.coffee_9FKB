
# For inside-directory checking, we want to allow trailing slashes, so normalize.

# Node treats only Windows as case-insensitive in its path module; we follow those conventions.
stripTrailingSep = (thePath) ->
  return thePath.slice(0, -1)  if thePath[thePath.length - 1] is path.sep
  thePath
"use strict"
path = require("path")
module.exports = (thePath, potentialParent) ->
  thePath = stripTrailingSep(thePath)
  potentialParent = stripTrailingSep(potentialParent)
  if process.platform is "win32"
    thePath = thePath.toLowerCase()
    potentialParent = potentialParent.toLowerCase()
  thePath.lastIndexOf(potentialParent, 0) is 0 and (thePath[potentialParent.length] is path.sep or thePath[potentialParent.length] is `undefined`)
