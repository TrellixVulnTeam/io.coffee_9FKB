Minimatch = require("../minimatch.js").Minimatch
tap = require("tap")
tap.test "cache test", (t) ->
  mm1 = new Minimatch("a?b")
  mm2 = new Minimatch("a?b")
  t.equal mm1, mm2, "should get the same object"
  
  # the lru should drop it after 100 entries
  i = 0

  while i < 100
    new Minimatch("a" + i)
    i++
  mm2 = new Minimatch("a?b")
  t.notEqual mm1, mm2, "cache should have dropped"
  t.end()
  return

