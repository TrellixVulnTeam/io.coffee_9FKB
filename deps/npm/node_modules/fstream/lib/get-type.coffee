getType = (st) ->
  types = [
    "Directory"
    "File"
    "SymbolicLink"
    "Link" # special for hardlinks from tarballs
    "BlockDevice"
    "CharacterDevice"
    "FIFO"
    "Socket"
  ]
  type = undefined
  if st.type and -1 isnt types.indexOf(st.type)
    st[st.type] = true
    return st.type
  i = 0
  l = types.length

  while i < l
    type = types[i]
    is_ = st[type] or st["is" + type]
    is_ = is_.call(st)  if typeof is_ is "function"
    if is_
      st[type] = true
      st.type = type
      return type
    i++
  null
module.exports = getType
