fs = undefined
try
  fs = require("graceful-fs")
catch e
  fs = require("fs")
test = require("tap").test
glob = require("../")
test "mock fs", (t) ->
  fs.readdir = (path, cb) ->
    process.nextTick ->
      cb new Error("mock fs.readdir error")
      return

    return

  t.pass "mocked"
  t.end()
  return

test "error callback", (t) ->
  glob "*", (err, res) ->
    t.ok err, "expecting mock error"
    t.end()
    return

  return

