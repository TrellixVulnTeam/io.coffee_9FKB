test = require("tap").test
glob = require("../")
mkdirp = require("mkdirp")
fs = require("fs")
rimraf = require("rimraf")
dir = __dirname + "/package"
test "setup", (t) ->
  mkdirp.sync dir
  fs.writeFileSync dir + "/package.json", "{}", "ascii"
  fs.writeFileSync dir + "/README", "x", "ascii"
  t.pass "setup done"
  t.end()
  return

test "glob", (t) ->
  opt =
    cwd: dir
    nocase: true
    mark: true

  glob "README?(.*)", opt, (er, files) ->
    throw er  if er
    t.same files, ["README"]
    t.end()
    return

  return

test "cleanup", (t) ->
  rimraf.sync dir
  t.pass "clean"
  t.end()
  return

