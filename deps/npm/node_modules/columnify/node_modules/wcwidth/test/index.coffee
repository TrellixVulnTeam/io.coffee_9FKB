"use strict"
wcwidth = require("../")
test = require("tape")
test "handles regular strings", (t) ->
  t.strictEqual wcwidth("abc"), 3
  t.end()
  return

test "handles multibyte strings", (t) ->
  t.strictEqual wcwidth("字的模块"), 8
  t.end()
  return

test "handles multibyte characters mixed with regular characters", (t) ->
  t.strictEqual wcwidth("abc 字的模块"), 12
  t.end()
  return

test "ignores control characters e.g. \\n", (t) ->
  t.strictEqual wcwidth("abc\n字的模块\ndef"), 14
  t.end()
  return

test "ignores bad input", (t) ->
  t.strictEqual wcwidth(""), 0
  t.strictEqual wcwidth(3), 0
  t.strictEqual wcwidth({}), 0
  t.strictEqual wcwidth([]), 0
  t.strictEqual wcwidth(), 0
  t.end()
  return

test "ignores nul (charcode 0)", (t) ->
  t.strictEqual wcwidth(String.fromCharCode(0)), 0
  t.end()
  return

test "ignores nul mixed with chars", (t) ->
  t.strictEqual wcwidth("a" + String.fromCharCode(0) + "\n字的"), 5
  t.end()
  return

test "can have custom value for nul", (t) ->
  t.strictEqual wcwidth.config(nul: 10)(String.fromCharCode(0) + "a字的"), 15
  t.end()
  return

test "can have custom control char value", (t) ->
  t.strictEqual wcwidth.config(control: 1)("abc\n字的模块\ndef"), 16
  t.end()
  return

test "negative custom control chars == -1", (t) ->
  t.strictEqual wcwidth.config(control: -1)("abc\n字的模块\ndef"), -1
  t.end()
  return

