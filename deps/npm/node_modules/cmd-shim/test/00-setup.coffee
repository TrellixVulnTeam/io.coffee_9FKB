test = require("tap").test
mkdirp = require("mkdirp")
fs = require("fs")
path = require("path")
fixtures = path.resolve(__dirname, "fixtures")
froms =
  "from.exe": "exe"
  "from.env": "#!/usr/bin/env node\nconsole.log(/hi/)\n"
  "from.env.args": "#!/usr/bin/env node --expose_gc\ngc()\n"
  "from.sh": "#!/usr/bin/sh\necho hi\n"
  "from.sh.args": "#!/usr/bin/sh -x\necho hi\n"

cmdShim = require("../")
test "create fixture", (t) ->
  mkdirp fixtures, (er) ->
    throw er  if er
    t.pass "made dir"
    Object.keys(froms).forEach (f) ->
      t.test "write " + f, (t) ->
        fs.writeFile path.resolve(fixtures, f), froms[f], (er) ->
          throw er  if er
          t.pass "wrote " + f
          t.end()
          return

        return

      return

    t.end()
    return

  return

