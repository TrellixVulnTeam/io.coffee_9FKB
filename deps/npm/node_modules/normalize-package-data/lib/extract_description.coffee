
# Extracts description from contents of a readme file in markdown format
extractDescription = (d) ->
  return  unless d
  return  if d is "ERROR: No README data found!"
  
  # the first block of text before the first heading
  # that isn't the first line heading
  d = d.trim().split("\n")
  s = 0

  while d[s] and d[s].trim().match(/^(#|$)/)
    s++
  l = d.length
  e = s + 1

  while e < l and d[e].trim()
    e++
  d.slice(s, e).join(" ").trim()
module.exports = extractDescription
