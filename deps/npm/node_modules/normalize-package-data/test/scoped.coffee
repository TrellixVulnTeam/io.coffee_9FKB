test = require("tap").test
fixNameField = require("../lib/fixer.js").fixNameField
test "a simple scoped module has a valid name", (t) ->
  data = name: "@org/package"
  fixNameField data, false
  t.equal data.name, "@org/package", "name was unchanged"
  t.end()
  return

test "'org@package' is not a valid name", (t) ->
  t.throws (->
    fixNameField
      name: "org@package"
    , false
    return
  ), "blows up as expected"
  t.end()
  return

test "'org=package' is not a valid name", (t) ->
  t.throws (->
    fixNameField
      name: "org=package"
    , false
    return
  ), "blows up as expected"
  t.end()
  return

test "'@org=sub/package' is not a valid name", (t) ->
  t.throws (->
    fixNameField
      name: "@org=sub/package"
    , false
    return
  ), "blows up as expected"
  t.end()
  return

test "'@org/' is not a valid name", (t) ->
  t.throws (->
    fixNameField
      name: "@org/"
    , false
    return
  ), "blows up as expected"
  t.end()
  return

test "'@/package' is not a valid name", (t) ->
  t.throws (->
    fixNameField
      name: "@/package"
    , false
    return
  ), "blows up as expected"
  t.end()
  return

