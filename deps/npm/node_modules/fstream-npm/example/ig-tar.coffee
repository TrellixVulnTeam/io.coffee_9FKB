# this will show what ends up in the fstream-npm package
f = (entry) ->
  entry.basename isnt ".git"
P = require("fstream-ignore")
tar = require("tar")
new P(
  path: "./"
  type: "Directory"
  Directory: true
  filter: f
).on("package", (p) ->
  console.error "package", p
  return
).on("ignoreFile", (e) ->
  console.error "ignoreFile", e
  return
).on("entry", (e) ->
  console.error e.constructor.name, e.path.substr(e.root.path.length + 1)
  return
).pipe(tar.Pack()).pipe process.stdout
