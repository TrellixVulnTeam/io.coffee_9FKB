mkdirp = require("../").mkdirp
path = require("path")
fs = require("fs")
test = require("tap").test
ps = [
  ""
  "tmp"
]
i = 0

while i < 25
  dir = Math.floor(Math.random() * Math.pow(16, 4)).toString(16)
  ps.push dir
  i++
file = ps.join("/")
test "chmod-pre", (t) ->
  mode = 0744
  mkdirp file, mode, (er) ->
    t.ifError er, "should not error"
    fs.stat file, (er, stat) ->
      t.ifError er, "should exist"
      t.ok stat and stat.isDirectory(), "should be directory"
      t.equal stat and stat.mode & 0777, mode, "should be 0744"
      t.end()
      return

    return

  return

test "chmod", (t) ->
  mode = 0755
  mkdirp file, mode, (er) ->
    t.ifError er, "should not error"
    fs.stat file, (er, stat) ->
      t.ifError er, "should exist"
      t.ok stat and stat.isDirectory(), "should be directory"
      t.end()
      return

    return

  return

