mkdirp = require("../").mkdirp
path = require("path")
fs = require("fs")
test = require("tap").test
ps = [
  ""
  "tmp"
]
i = 0

while i < 25
  dir = Math.floor(Math.random() * Math.pow(16, 4)).toString(16)
  ps.push dir
  i++
file = ps.join("/")

# a file in the way
itw = ps.slice(0, 3).join("/")
test "clobber-pre", (t) ->
  console.error "about to write to " + itw
  fs.writeFileSync itw, "I AM IN THE WAY, THE TRUTH, AND THE LIGHT."
  fs.stat itw, (er, stat) ->
    t.ifError er
    t.ok stat and stat.isFile(), "should be file"
    t.end()
    return

  return

test "clobber", (t) ->
  t.plan 2
  mkdirp file, 0755, (err) ->
    t.ok err
    t.equal err.code, "ENOTDIR"
    t.end()
    return

  return

