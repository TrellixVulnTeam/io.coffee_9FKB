readInstalled = require("../read-installed.js")
test = require("tap").test
json = require("../package.json")
path = require("path")
known = [].concat(Object.keys(json.dependencies), Object.keys(json.optionalDependencies), Object.keys(json.devDependencies)).sort()
test "make sure that it works with depth=1", (t) ->
  readInstalled path.join(__dirname, "../"),
    depth: 1
  , (er, map) ->
    t.notOk er, "er should be bull"
    t.ok map, "map should be data"
    return console.error(er.stack or er.message)  if er
    subdeps = Object.keys(map.dependencies).reduce((acc, dep) ->
      acc += Object.keys(map.dependencies[dep].dependencies).length
      acc
    , 0)
    t.notEqual subdeps, 0, "there should some sub dependencies"
    t.end()
    return

  return

