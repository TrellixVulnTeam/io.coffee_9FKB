allValid = (t, map) ->
  deps = Object.keys(map.dependencies or {})
  deps.forEach (dep) ->
    t.ok map.dependencies[dep].extraneous, "dependency " + dep + " of " + map.name + " is extraneous"
    return

  return
readInstalled = require("../read-installed.js")
test = require("tap").test
path = require("path")
test "grandparent dev peer dependencies should be extraneous", (t) ->
  readInstalled path.join(__dirname, "fixtures/grandparent-peer-dev"),
    log: console.error
  , (err, map) ->
    allValid t, map
    t.end()
    return

  return

