# vim: set softtabstop=16 shiftwidth=16:
tap = require("tap")
readJson = require("../")
path = require("path")
fs = require("fs")
expect =
  name: "read-package-json"
  version: "0.1.1"
  author:
    name: "Isaac Z. Schlueter"
    email: "i@izs.me"
    url: "http://blog.izs.me/"

  description: "The thing npm uses to read package.json files with semantics and defaults and validation"
  repository:
    type: "git"
    url: "git://github.com/isaacs/read-package-json.git"

  bugs:
    url: "https://github.com/isaacs/read-package-json/issues"

  main: "read-json.js"
  scripts:
    test: "tap test/*.js"

  dependencies:
    glob: "~3.1.9"
    "lru-cache": "~1.1.0"
    semver: "~1.0.14"
    slide: "~1.1.3"
    npmlog: "0"
    "graceful-fs": "~1.1.8"

  devDependencies:
    tap: "~0.2.5"

  homepage: "https://github.com/isaacs/read-package-json"
  optionalDependencies:
    npmlog: "0"
    "graceful-fs": "~1.1.8"

  _id: "read-package-json@0.1.1"
  readme: "ERROR: No README data found!"

tap.test "from css", (t) ->
  c = path.join(__dirname, "fixtures", "not-json.css")
  readJson c, (er, d) ->
    t.same d, expect
    t.end()
    return

  return

tap.test "from js", (t) ->
  readJson __filename, (er, d) ->
    t.same d, expect
    t.end()
    return

  return


###*
package
{
"name": "read-package-json",
"version": "0.1.1",
"author": "Isaac Z. Schlueter <i@izs.me> (http://blog.izs.me/)",
"description": "The thing npm uses to read package.json files with semantics and defaults and validation",
"repository": {
"type": "git",
"url": "git://github.com/isaacs/read-package-json.git"
},
"main": "read-json.js",
"scripts": {
"test": "tap test/*.js"
},
"dependencies": {
"glob": "~3.1.9",
"lru-cache": "~1.1.0",
"semver": "~1.0.14",
"slide": "~1.1.3"
},
"devDependencies": {
"tap": "~0.2.5"
},
"optionalDependencies": {
"npmlog": "0",
"graceful-fs": "~1.1.8"
}
}
###
