#
# * Test to make sure that we properly are erroring whenever we try to write
# * beyond the size of the integer.
# 
# Largest buffer we'll need 
test = ->
  ii = undefined
  ii = 0
  while ii < cases.length
    mod_assert.throws cases[ii]["func"], Error, cases[ii]["test"]
    ii++
  return
mod_ctio = require("../../../ctio.js")
mod_assert = require("assert")
tb = new Buffer(16)
cases = [
  {
    func: ->
      mod_ctio.wsint8 0x80, "big", tb, 0
      return

    test: "+int8_t"
  }
  {
    func: ->
      mod_ctio.wsint8 -0x81, "big", tb, 0
      return

    test: "-int8_t"
  }
  {
    func: ->
      mod_ctio.wsint16 0x8000, "big", tb, 0
      return

    test: "+int16_t"
  }
  {
    func: ->
      mod_ctio.wsint16 -0x8001, "big", tb, 0
      return

    test: "-int16_t"
  }
  {
    func: ->
      mod_ctio.wsint32 0x80000000, "big", tb, 0
      return

    test: "+int32_t"
  }
  {
    func: ->
      mod_ctio.wsint32 -0x80000001, "big", tb, 0
      return

    test: "-int32_t"
  }
  {
    func: ->
      mod_ctio.wsint64 [
        0x80000000
        0
      ], "big", tb, 0
      return

    test: "+int64_t"
  }
  {
    func: ->
      mod_ctio.wsint64 [
        -0x80000000
        -1
      ], "big", tb, 0
      return

    test: "-int64_t"
  }
]
test()
