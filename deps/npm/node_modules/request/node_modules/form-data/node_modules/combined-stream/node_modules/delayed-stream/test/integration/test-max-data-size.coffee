common = require("../common")
assert = common.assert
fake = common.fake.create()
DelayedStream = common.DelayedStream
Stream = require("stream").Stream
(testMaxDataSize = ->
  source = new Stream()
  delayedStream = DelayedStream.create(source,
    maxDataSize: 1024
    pauseStream: false
  )
  source.emit "data", new Buffer(1024)
  fake.expect(delayedStream, "emit").withArg 1, "error"
  source.emit "data", new Buffer(1)
  fake.verify()
  return
)()
