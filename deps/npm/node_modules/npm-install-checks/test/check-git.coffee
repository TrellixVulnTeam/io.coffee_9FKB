test = require("tap").test
c = require("../index.js").checkGit
fs = require("fs")
rimraf = require("rimraf")
mkdirp = require("mkdirp")
path = require("path")
gitFixturePath = path.resolve(__dirname, "out")
test "is .git repo", (t) ->
  mkdirp gitFixturePath + "/.git", ->
    c gitFixturePath, (err) ->
      t.ok err, "error present"
      t.equal err.code, "EISGIT"
      t.end()
      return

    return

  return

test "is not a .git repo", (t) ->
  c __dirname, (err) ->
    t.notOk err, "error not present"
    t.end()
    return

  return

test "cleanup", (t) ->
  rimraf gitFixturePath, ->
    t.pass "cleanup"
    t.end()
    return

  return

