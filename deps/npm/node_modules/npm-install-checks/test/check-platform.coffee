test = require("tap").test
c = require("../index.js").checkPlatform
test "target cpu wrong", (t) ->
  target = {}
  target.cpu = "enten-cpu"
  target.os = "any"
  c target, false, (err) ->
    t.ok err, "error present"
    t.equal err.code, "EBADPLATFORM"
    t.end()
    return

  return

test "os wrong", (t) ->
  target = {}
  target.cpu = "any"
  target.os = "enten-os"
  c target, false, (err) ->
    t.ok err, "error present"
    t.equal err.code, "EBADPLATFORM"
    t.end()
    return

  return

test "nothing wrong", (t) ->
  target = {}
  target.cpu = "any"
  target.os = "any"
  c target, false, (err) ->
    t.notOk err, "no error present"
    t.end()
    return

  return

test "force", (t) ->
  target = {}
  target.cpu = "enten-cpu"
  target.os = "any"
  c target, true, (err) ->
    t.notOk err, "no error present"
    t.end()
    return

  return

